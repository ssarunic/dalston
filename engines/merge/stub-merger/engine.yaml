id: stub-merger
stage: merge
name: Stub Merger
version: 0.1.0
description: |
  Stub engine for testing the batch pipeline.
  Merges upstream outputs into a final transcript and writes to canonical location.
  Used in M01 before real merger engines are implemented.

container:
  gpu: none
  memory: 256M

capabilities:
  streaming: false

input:
  requires_previous_outputs:
    - transcribe

config_schema:
  type: object
  properties: {}
  additionalProperties: false

output_schema:
  type: object
  required:
    - text
    - segments
    - speakers
    - metadata
  properties:
    text:
      type: string
      description: Full transcript text
    segments:
      type: array
      description: Transcript segments with timestamps
      items:
        type: object
        properties:
          start:
            type: number
          end:
            type: number
          text:
            type: string
    words:
      type: array
      nullable: true
      description: Word-level timestamps (optional)
    speakers:
      type: array
      description: Speaker information (empty in M01)
    metadata:
      type: object
      description: Processing metadata
      properties:
        language:
          type: string
          description: Detected language code
        language_confidence:
          type: number
          description: Confidence in language detection
        pipeline:
          type: array
          description: List of engines that processed this job
          items:
            type: string
