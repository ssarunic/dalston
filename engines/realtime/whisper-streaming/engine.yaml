schema_version: "1.0"
id: whisper-streaming
type: realtime
name: Whisper Streaming
version: 1.0.0
description: |
  Real-time streaming transcription using Whisper.
  Supports "fast" (distil-whisper) and "accurate" (large-v3) variants.
  Uses Silero VAD for speech boundary detection.

container:
  gpu: optional  # Recommended for performance; auto-detects and falls back to CPU
  memory: 12G   # Needs to hold two models in memory
  model_cache: /models

capabilities:
  languages:
    - all  # 99 languages supported with auto-detection
  max_sessions: 4
  streaming: true
  word_timestamps: true

server:
  port: 9000
  protocol: websocket
  path: /session

models:
  fast:
    name: distil-whisper/distil-large-v3
    description: Distil-Whisper for low-latency transcription
    latency: low
    accuracy: good
  accurate:
    name: large-v3
    description: Whisper large-v3 for high accuracy
    latency: medium
    accuracy: excellent

audio:
  encodings:
    - pcm_s16le
    - pcm_f32le
    - mulaw
    - alaw
  sample_rates:
    - 16000
  channels: 1

vad:
  engine: silero
  threshold: 0.5
  min_speech_duration_ms: 250
  min_silence_duration_ms: 500
  lookback_ms: 300

heartbeat:
  interval_seconds: 10
  timeout_seconds: 30

environment:
  WORKER_ID:
    description: Unique identifier for this worker
    required: true
  WORKER_PORT:
    description: WebSocket server port
    default: "9000"
  MAX_SESSIONS:
    description: Maximum concurrent sessions
    default: "4"
  REDIS_URL:
    description: Redis connection URL
    default: redis://localhost:6379
  FAST_MODEL:
    description: Model for "fast" variant
    default: distil-whisper/distil-large-v3
  ACCURATE_MODEL:
    description: Model for "accurate" variant
    default: large-v3
