# M10 Task 10.1: Web Console Project Setup - Implementation Plan

## Overview

This plan covers setting up the React frontend project for the Dalston Web Console. The goal is to create a solid foundation with:

- Vite 5 + React 18 + TypeScript
- Tailwind CSS with dark theme
- shadcn/ui component library for rapid UI development
- React Router for navigation
- TanStack Query (React Query) for data fetching with auto-refresh
- API client structure reusing existing endpoints

## Architecture

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                           WEB CONSOLE ARCHITECTURE                           │
│                                                                              │
│   Browser                                                                    │
│   ┌──────────────────────────────────────────────────────────────────────┐  │
│   │                        React Application                              │  │
│   │                                                                       │  │
│   │   ┌─────────────┐   ┌──────────────────────────────────────────────┐ │  │
│   │   │   Sidebar   │   │            Page Content                       │ │  │
│   │   │             │   │                                               │ │  │
│   │   │  Dashboard  │──▶│  Dashboard / BatchJobs / JobDetail / etc.    │ │  │
│   │   │  Batch Jobs │   │                                               │ │  │
│   │   │  Realtime   │   │  ┌─────────────────────────────────────────┐ │ │  │
│   │   │  Engines    │   │  │         React Query Hooks               │ │ │  │
│   │   │             │   │  │  useJobs, useJob, useStatus, useRealtime│ │ │  │
│   │   └─────────────┘   │  └─────────────────────────────────────────┘ │ │  │
│   │                     │                      │                        │ │  │
│   │                     └──────────────────────┼────────────────────────┘ │  │
│   │                                            │                          │  │
│   │   ┌────────────────────────────────────────┴───────────────────────┐ │  │
│   │   │                        API Client                               │ │  │
│   │   │  Typed fetch methods → GET /v1/audio/transcriptions, etc.      │ │  │
│   │   └────────────────────────────────────────────────────────────────┘ │  │
│   └──────────────────────────────────────────────────────────────────────┘  │
│                                     │                                        │
│                                     │ HTTP / WebSocket                       │
│                                     ▼                                        │
│   ┌──────────────────────────────────────────────────────────────────────┐  │
│   │                     Gateway (FastAPI @ port 8000)                     │  │
│   │                                                                       │  │
│   │   Existing Endpoints (reuse):                                        │  │
│   │   • GET /health                      → System health                 │  │
│   │   • GET /v1/audio/transcriptions     → Job list with pagination      │  │
│   │   • GET /v1/audio/transcriptions/:id → Job detail with transcript    │  │
│   │   • GET /v1/realtime/status          → Realtime capacity             │  │
│   │   • GET /v1/realtime/workers         → Worker list                   │  │
│   │                                                                       │  │
│   │   New Endpoints (10.6):                                              │  │
│   │   • GET /api/console/dashboard       → Aggregated dashboard data     │  │
│   │   • GET /api/console/jobs/:id/tasks  → Task DAG for job              │  │
│   │   • GET /api/console/engines         → Batch + realtime engines      │  │
│   │                                                                       │  │
│   └──────────────────────────────────────────────────────────────────────┘  │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## Technology Stack

| Component | Choice | Version | Reason |
|-----------|--------|---------|--------|
| Build tool | Vite | 5.x | Fast HMR, ESM-native, excellent DX |
| Framework | React | 18.x | Industry standard, hooks-based |
| Language | TypeScript | 5.x | Type safety with API responses |
| Styling | Tailwind CSS | 3.x | Utility-first, consistent design |
| Components | shadcn/ui | latest | Accessible, customizable, Tailwind-native |
| Data fetching | TanStack Query | 5.x | Caching, refetch intervals, loading states |
| Routing | React Router | 6.x | Client-side SPA routing |
| HTTP client | ky | 1.x | Lightweight, modern fetch wrapper |
| Icons | Lucide React | latest | Consistent icon set (used by shadcn/ui) |

**Theme**: Dark mode by default (Tailwind `dark` class on `<html>`)

---

## File Structure

```
web/
├── package.json                    # Dependencies and scripts
├── vite.config.ts                  # Vite config with API proxy
├── tsconfig.json                   # TypeScript config
├── tsconfig.node.json             # TypeScript for Vite config
├── postcss.config.js              # PostCSS for Tailwind
├── tailwind.config.js             # Tailwind with dark theme
├── components.json                # shadcn/ui config
├── index.html                     # HTML entry point
├── .gitignore                     # Node ignores
│
└── src/
    ├── main.tsx                   # React entry, render App
    ├── App.tsx                    # Router setup
    ├── index.css                  # Tailwind imports + base styles
    ├── vite-env.d.ts             # Vite type declarations
    │
    ├── lib/
    │   └── utils.ts              # cn() helper for Tailwind classes
    │
    ├── api/
    │   ├── client.ts             # API client with typed methods
    │   └── types.ts              # TypeScript interfaces for API
    │
    ├── hooks/
    │   ├── useJobs.ts            # Jobs list query
    │   ├── useJob.ts             # Single job query
    │   ├── useJobTasks.ts        # Task DAG query
    │   ├── useDashboard.ts       # Dashboard aggregated data
    │   └── useRealtimeStatus.ts  # Realtime capacity query
    │
    ├── components/
    │   ├── ui/                   # shadcn/ui components (auto-generated)
    │   │   ├── button.tsx
    │   │   ├── card.tsx
    │   │   ├── badge.tsx
    │   │   ├── table.tsx
    │   │   ├── skeleton.tsx
    │   │   └── ... (added as needed)
    │   │
    │   ├── Layout.tsx            # Main layout with sidebar
    │   ├── Sidebar.tsx           # Navigation sidebar
    │   └── StatusBadge.tsx       # Job/task status badge component
    │
    └── pages/
        ├── Dashboard.tsx         # System overview (placeholder)
        ├── BatchJobs.tsx         # Job list (placeholder)
        ├── JobDetail.tsx         # Single job view (placeholder)
        ├── RealtimeSessions.tsx  # Realtime monitoring (placeholder)
        └── Engines.tsx           # Engine status (placeholder)
```

---

## Component Details

### 1. `package.json` - Dependencies

```json
{
  "name": "dalston-console",
  "private": true,
  "version": "0.1.0",
  "type": "module",
  "scripts": {
    "dev": "vite",
    "build": "tsc && vite build",
    "preview": "vite preview",
    "lint": "eslint . --ext ts,tsx --report-unused-disable-directives --max-warnings 0"
  },
  "dependencies": {
    "react": "^18.3.1",
    "react-dom": "^18.3.1",
    "react-router-dom": "^6.26.0",
    "@tanstack/react-query": "^5.51.0",
    "ky": "^1.5.0",
    "lucide-react": "^0.424.0",
    "clsx": "^2.1.1",
    "tailwind-merge": "^2.4.0",
    "class-variance-authority": "^0.7.0"
  },
  "devDependencies": {
    "@types/react": "^18.3.3",
    "@types/react-dom": "^18.3.0",
    "@typescript-eslint/eslint-plugin": "^7.15.0",
    "@typescript-eslint/parser": "^7.15.0",
    "@vitejs/plugin-react": "^4.3.1",
    "autoprefixer": "^10.4.19",
    "eslint": "^8.57.0",
    "eslint-plugin-react-hooks": "^4.6.2",
    "eslint-plugin-react-refresh": "^0.4.7",
    "postcss": "^8.4.40",
    "tailwindcss": "^3.4.7",
    "typescript": "^5.5.3",
    "vite": "^5.4.0"
  }
}
```

---

### 2. `vite.config.ts` - Build Configuration

```typescript
import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react'
import path from 'path'

export default defineConfig({
  plugins: [react()],
  resolve: {
    alias: {
      '@': path.resolve(__dirname, './src'),
    },
  },
  server: {
    port: 3000,
    proxy: {
      '/v1': {
        target: 'http://localhost:8000',
        changeOrigin: true,
      },
      '/api': {
        target: 'http://localhost:8000',
        changeOrigin: true,
      },
      '/health': {
        target: 'http://localhost:8000',
        changeOrigin: true,
      },
    },
  },
  build: {
    outDir: 'dist',
    sourcemap: true,
  },
})
```

**Key features:**
- Path alias `@/` for clean imports
- Proxy all API routes to gateway during development
- Source maps for debugging

---

### 3. `tailwind.config.js` - Dark Theme

```javascript
/** @type {import('tailwindcss').Config} */
export default {
  darkMode: 'class',
  content: [
    './index.html',
    './src/**/*.{js,ts,jsx,tsx}',
  ],
  theme: {
    extend: {
      colors: {
        border: 'hsl(var(--border))',
        input: 'hsl(var(--input))',
        ring: 'hsl(var(--ring))',
        background: 'hsl(var(--background))',
        foreground: 'hsl(var(--foreground))',
        primary: {
          DEFAULT: 'hsl(var(--primary))',
          foreground: 'hsl(var(--primary-foreground))',
        },
        secondary: {
          DEFAULT: 'hsl(var(--secondary))',
          foreground: 'hsl(var(--secondary-foreground))',
        },
        destructive: {
          DEFAULT: 'hsl(var(--destructive))',
          foreground: 'hsl(var(--destructive-foreground))',
        },
        muted: {
          DEFAULT: 'hsl(var(--muted))',
          foreground: 'hsl(var(--muted-foreground))',
        },
        accent: {
          DEFAULT: 'hsl(var(--accent))',
          foreground: 'hsl(var(--accent-foreground))',
        },
        card: {
          DEFAULT: 'hsl(var(--card))',
          foreground: 'hsl(var(--card-foreground))',
        },
      },
      borderRadius: {
        lg: 'var(--radius)',
        md: 'calc(var(--radius) - 2px)',
        sm: 'calc(var(--radius) - 4px)',
      },
    },
  },
  plugins: [],
}
```

---

### 4. `src/index.css` - Base Styles + Dark Theme Variables

```css
@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --background: 222.2 84% 4.9%;
    --foreground: 210 40% 98%;
    --card: 222.2 84% 4.9%;
    --card-foreground: 210 40% 98%;
    --primary: 217.2 91.2% 59.8%;
    --primary-foreground: 222.2 84% 4.9%;
    --secondary: 217.2 32.6% 17.5%;
    --secondary-foreground: 210 40% 98%;
    --muted: 217.2 32.6% 17.5%;
    --muted-foreground: 215 20.2% 65.1%;
    --accent: 217.2 32.6% 17.5%;
    --accent-foreground: 210 40% 98%;
    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 210 40% 98%;
    --border: 217.2 32.6% 17.5%;
    --input: 217.2 32.6% 17.5%;
    --ring: 224.3 76.3% 48%;
    --radius: 0.5rem;
  }

  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground;
    font-feature-settings: "rlig" 1, "calt" 1;
  }
}
```

This is a dark theme by default (no separate light mode variables needed).

---

### 5. `src/lib/utils.ts` - Utility Functions

```typescript
import { type ClassValue, clsx } from 'clsx'
import { twMerge } from 'tailwind-merge'

export function cn(...inputs: ClassValue[]) {
  return twMerge(clsx(inputs))
}
```

Standard shadcn/ui utility for merging Tailwind classes.

---

### 6. `src/api/types.ts` - API Type Definitions

```typescript
// Job types (matching backend responses)
export type JobStatus = 'pending' | 'running' | 'completed' | 'failed' | 'cancelled'
export type TaskStatus = 'pending' | 'ready' | 'running' | 'completed' | 'failed' | 'skipped'

export interface Word {
  word: string
  start: number
  end: number
  confidence: number
  speaker?: string
}

export interface Segment {
  id: string
  start: number
  end: number
  text: string
  speaker?: string
  confidence: number
  words?: Word[]
}

export interface Speaker {
  id: string
  label: string
  sample_start?: number
  sample_end?: number
}

export interface JobSummary {
  id: string
  status: JobStatus
  created_at: string
  started_at?: string
  completed_at?: string
  progress?: number
}

export interface JobDetail extends JobSummary {
  error?: string
  current_stage?: string
  language_code?: string
  text?: string
  words?: Word[]
  segments?: Segment[]
  speakers?: Speaker[]
}

export interface JobListResponse {
  jobs: JobSummary[]
  total: number
  limit: number
  offset: number
}

// Task types
export interface Task {
  id: string
  stage: string
  engine_id: string
  status: TaskStatus
  dependencies: string[]
  started_at?: string
  completed_at?: string
  error?: string
}

export interface TaskListResponse {
  job_id: string
  tasks: Task[]
}

// Realtime types
export interface WorkerStatus {
  worker_id: string
  endpoint: string
  status: 'ready' | 'unhealthy'
  capacity: number
  active_sessions: number
  models: string[]
  languages: string[]
}

export interface CapacityInfo {
  total_capacity: number
  used_capacity: number
  available_capacity: number
  worker_count: number
  ready_workers: number
}

export interface RealtimeStatusResponse {
  capacity: CapacityInfo
  workers: WorkerStatus[]
}

// Dashboard types (aggregated)
export interface SystemStatus {
  healthy: boolean
  gateway_version?: string
}

export interface BatchStats {
  running_jobs: number
  queued_jobs: number
  completed_today: number
}

export interface DashboardResponse {
  system: SystemStatus
  batch: BatchStats
  realtime: CapacityInfo
  recent_jobs: JobSummary[]
}

// Health check
export interface HealthResponse {
  status: string
  version?: string
}
```

---

### 7. `src/api/client.ts` - API Client

```typescript
import ky from 'ky'
import type {
  DashboardResponse,
  HealthResponse,
  JobDetail,
  JobListResponse,
  RealtimeStatusResponse,
  TaskListResponse,
} from './types'

// Base client with defaults
const api = ky.create({
  prefixUrl: '/',
  timeout: 30000,
  retry: 1,
})

export interface JobListParams {
  limit?: number
  offset?: number
  status?: string
}

export const apiClient = {
  // Health check
  getHealth: () => api.get('health').json<HealthResponse>(),

  // Dashboard (aggregated) - to be implemented in 10.6
  getDashboard: () => api.get('api/console/dashboard').json<DashboardResponse>(),

  // Jobs (reuse existing endpoints)
  getJobs: (params: JobListParams = {}) => {
    const searchParams = new URLSearchParams()
    if (params.limit) searchParams.set('limit', String(params.limit))
    if (params.offset) searchParams.set('offset', String(params.offset))
    if (params.status) searchParams.set('status', params.status)
    return api.get('v1/audio/transcriptions', { searchParams }).json<JobListResponse>()
  },

  getJob: (jobId: string) =>
    api.get(`v1/audio/transcriptions/${jobId}`).json<JobDetail>(),

  // Tasks (new endpoint for 10.6)
  getJobTasks: (jobId: string) =>
    api.get(`api/console/jobs/${jobId}/tasks`).json<TaskListResponse>(),

  // Realtime (reuse existing endpoints)
  getRealtimeStatus: () =>
    api.get('v1/realtime/status').json<RealtimeStatusResponse>(),
}
```

**Note:** Some endpoints (`/api/console/dashboard`, `/api/console/jobs/:id/tasks`) will be implemented in task 10.6. For now, the client defines them so hooks can be written. The hooks will gracefully handle 404s during initial development.

---

### 8. `src/hooks/useDashboard.ts` - Dashboard Query

```typescript
import { useQuery } from '@tanstack/react-query'
import { apiClient } from '@/api/client'

export function useDashboard() {
  return useQuery({
    queryKey: ['dashboard'],
    queryFn: () => apiClient.getDashboard(),
    refetchInterval: 5000, // Auto-refresh every 5 seconds
    retry: false, // Don't retry on 404 (endpoint may not exist yet)
  })
}
```

---

### 9. `src/hooks/useJobs.ts` - Jobs List Query

```typescript
import { useQuery } from '@tanstack/react-query'
import { apiClient, JobListParams } from '@/api/client'

export function useJobs(params: JobListParams = {}) {
  return useQuery({
    queryKey: ['jobs', params],
    queryFn: () => apiClient.getJobs(params),
    refetchInterval: 5000, // Auto-refresh every 5 seconds
  })
}
```

---

### 10. `src/hooks/useJob.ts` - Single Job Query

```typescript
import { useQuery } from '@tanstack/react-query'
import { apiClient } from '@/api/client'

export function useJob(jobId: string | undefined) {
  return useQuery({
    queryKey: ['job', jobId],
    queryFn: () => apiClient.getJob(jobId!),
    enabled: !!jobId,
    refetchInterval: (query) => {
      // Only auto-refresh if job is running
      const status = query.state.data?.status
      return status === 'pending' || status === 'running' ? 2000 : false
    },
  })
}
```

---

### 11. `src/hooks/useJobTasks.ts` - Task DAG Query

```typescript
import { useQuery } from '@tanstack/react-query'
import { apiClient } from '@/api/client'

export function useJobTasks(jobId: string | undefined) {
  return useQuery({
    queryKey: ['job-tasks', jobId],
    queryFn: () => apiClient.getJobTasks(jobId!),
    enabled: !!jobId,
    retry: false, // Don't retry on 404 (endpoint may not exist yet)
    refetchInterval: (query) => {
      // Refresh while job is active
      // Note: We don't have job status here, so refresh every 2s
      // This could be optimized by combining with useJob
      return 2000
    },
  })
}
```

---

### 12. `src/hooks/useRealtimeStatus.ts` - Realtime Status Query

```typescript
import { useQuery } from '@tanstack/react-query'
import { apiClient } from '@/api/client'

export function useRealtimeStatus() {
  return useQuery({
    queryKey: ['realtime-status'],
    queryFn: () => apiClient.getRealtimeStatus(),
    refetchInterval: 5000, // Auto-refresh every 5 seconds
  })
}
```

---

### 13. `src/components/Layout.tsx` - Main Layout

```typescript
import { Sidebar } from './Sidebar'

interface LayoutProps {
  children: React.ReactNode
}

export function Layout({ children }: LayoutProps) {
  return (
    <div className="flex h-screen bg-background">
      <Sidebar />
      <main className="flex-1 overflow-auto p-6">
        {children}
      </main>
    </div>
  )
}
```

---

### 14. `src/components/Sidebar.tsx` - Navigation

```typescript
import { NavLink } from 'react-router-dom'
import { cn } from '@/lib/utils'
import {
  LayoutDashboard,
  ListTodo,
  Radio,
  Server,
} from 'lucide-react'

const navItems = [
  { to: '/', icon: LayoutDashboard, label: 'Dashboard' },
  { to: '/jobs', icon: ListTodo, label: 'Batch Jobs' },
  { to: '/realtime', icon: Radio, label: 'Realtime' },
  { to: '/engines', icon: Server, label: 'Engines' },
]

export function Sidebar() {
  return (
    <aside className="w-64 border-r border-border bg-card">
      <div className="p-6">
        <h1 className="text-xl font-bold text-foreground">DALSTON</h1>
        <p className="text-sm text-muted-foreground">Transcription Console</p>
      </div>
      <nav className="px-3">
        {navItems.map((item) => (
          <NavLink
            key={item.to}
            to={item.to}
            className={({ isActive }) =>
              cn(
                'flex items-center gap-3 rounded-md px-3 py-2 text-sm transition-colors',
                isActive
                  ? 'bg-accent text-accent-foreground'
                  : 'text-muted-foreground hover:bg-accent hover:text-accent-foreground'
              )
            }
          >
            <item.icon className="h-4 w-4" />
            {item.label}
          </NavLink>
        ))}
      </nav>
    </aside>
  )
}
```

---

### 15. `src/components/StatusBadge.tsx` - Status Badge

```typescript
import { cn } from '@/lib/utils'
import type { JobStatus, TaskStatus } from '@/api/types'

interface StatusBadgeProps {
  status: JobStatus | TaskStatus
  className?: string
}

const statusStyles: Record<string, string> = {
  pending: 'bg-zinc-500/20 text-zinc-400',
  ready: 'bg-yellow-500/20 text-yellow-400',
  running: 'bg-blue-500/20 text-blue-400 animate-pulse',
  completed: 'bg-green-500/20 text-green-400',
  failed: 'bg-red-500/20 text-red-400',
  cancelled: 'bg-zinc-500/20 text-zinc-400',
  skipped: 'bg-zinc-500/20 text-zinc-400',
}

export function StatusBadge({ status, className }: StatusBadgeProps) {
  return (
    <span
      className={cn(
        'inline-flex items-center rounded-full px-2 py-1 text-xs font-medium',
        statusStyles[status] || statusStyles.pending,
        className
      )}
    >
      {status}
    </span>
  )
}
```

---

### 16. `src/App.tsx` - Router Setup

```typescript
import { BrowserRouter, Routes, Route } from 'react-router-dom'
import { QueryClient, QueryClientProvider } from '@tanstack/react-query'
import { Layout } from '@/components/Layout'
import { Dashboard } from '@/pages/Dashboard'
import { BatchJobs } from '@/pages/BatchJobs'
import { JobDetail } from '@/pages/JobDetail'
import { RealtimeSessions } from '@/pages/RealtimeSessions'
import { Engines } from '@/pages/Engines'

const queryClient = new QueryClient({
  defaultOptions: {
    queries: {
      staleTime: 1000, // Consider data stale after 1 second
      refetchOnWindowFocus: true,
    },
  },
})

export default function App() {
  return (
    <QueryClientProvider client={queryClient}>
      <BrowserRouter>
        <Layout>
          <Routes>
            <Route path="/" element={<Dashboard />} />
            <Route path="/jobs" element={<BatchJobs />} />
            <Route path="/jobs/:jobId" element={<JobDetail />} />
            <Route path="/realtime" element={<RealtimeSessions />} />
            <Route path="/engines" element={<Engines />} />
          </Routes>
        </Layout>
      </BrowserRouter>
    </QueryClientProvider>
  )
}
```

---

### 17. `src/main.tsx` - Entry Point

```typescript
import React from 'react'
import ReactDOM from 'react-dom/client'
import App from './App'
import './index.css'

ReactDOM.createRoot(document.getElementById('root')!).render(
  <React.StrictMode>
    <App />
  </React.StrictMode>
)
```

---

### 18. Page Placeholders

Each page starts as a placeholder with basic structure:

**`src/pages/Dashboard.tsx`**
```typescript
export function Dashboard() {
  return (
    <div>
      <h1 className="text-2xl font-bold mb-6">Dashboard</h1>
      <p className="text-muted-foreground">System overview will be implemented in 10.3</p>
    </div>
  )
}
```

**`src/pages/BatchJobs.tsx`**
```typescript
import { useJobs } from '@/hooks/useJobs'

export function BatchJobs() {
  const { data, isLoading, error } = useJobs({ limit: 20 })

  if (isLoading) return <div>Loading...</div>
  if (error) return <div>Error loading jobs</div>

  return (
    <div>
      <h1 className="text-2xl font-bold mb-6">Batch Jobs</h1>
      <p className="text-muted-foreground mb-4">
        Total jobs: {data?.total ?? 0}
      </p>
      <p className="text-muted-foreground">Job list will be implemented in 10.3</p>
    </div>
  )
}
```

**`src/pages/JobDetail.tsx`**
```typescript
import { useParams } from 'react-router-dom'
import { useJob } from '@/hooks/useJob'

export function JobDetail() {
  const { jobId } = useParams()
  const { data: job, isLoading, error } = useJob(jobId)

  if (isLoading) return <div>Loading...</div>
  if (error) return <div>Error loading job</div>
  if (!job) return <div>Job not found</div>

  return (
    <div>
      <h1 className="text-2xl font-bold mb-6">Job: {job.id}</h1>
      <p className="text-muted-foreground">Status: {job.status}</p>
      <p className="text-muted-foreground">DAG viewer will be implemented in 10.4/10.5</p>
    </div>
  )
}
```

**`src/pages/RealtimeSessions.tsx`**
```typescript
import { useRealtimeStatus } from '@/hooks/useRealtimeStatus'

export function RealtimeSessions() {
  const { data, isLoading, error } = useRealtimeStatus()

  if (isLoading) return <div>Loading...</div>
  if (error) return <div>Error loading realtime status</div>

  return (
    <div>
      <h1 className="text-2xl font-bold mb-6">Realtime</h1>
      <p className="text-muted-foreground">
        Workers: {data?.capacity.worker_count ?? 0} |
        Capacity: {data?.capacity.used_capacity ?? 0}/{data?.capacity.total_capacity ?? 0}
      </p>
      <p className="text-muted-foreground mt-4">Full realtime view will be implemented later</p>
    </div>
  )
}
```

**`src/pages/Engines.tsx`**
```typescript
export function Engines() {
  return (
    <div>
      <h1 className="text-2xl font-bold mb-6">Engines</h1>
      <p className="text-muted-foreground">Engine status will be implemented later</p>
    </div>
  )
}
```

---

### 19. `index.html` - HTML Entry Point

```html
<!DOCTYPE html>
<html lang="en" class="dark">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dalston Console</title>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
```

Note the `class="dark"` on `<html>` for dark theme.

---

## Implementation Order

**Phase 1: Project Initialization**
1. Create `web/` directory
2. Initialize Vite project with React + TypeScript template
3. Install dependencies (React Query, React Router, ky, lucide-react, etc.)
4. Install Tailwind CSS and configure dark theme
5. Initialize shadcn/ui with dark theme

**Phase 2: Configuration**
6. Configure Vite with API proxy and path aliases
7. Set up TypeScript paths
8. Create base CSS with dark theme variables

**Phase 3: Core Structure**
9. Create `lib/utils.ts` with cn() helper
10. Create `api/types.ts` with TypeScript interfaces
11. Create `api/client.ts` with API methods

**Phase 4: Components**
12. Create `components/Layout.tsx`
13. Create `components/Sidebar.tsx`
14. Create `components/StatusBadge.tsx`

**Phase 5: Hooks**
15. Create all React Query hooks (useJobs, useJob, etc.)

**Phase 6: Pages**
16. Create page placeholders (Dashboard, BatchJobs, etc.)
17. Wire up App.tsx with router

**Phase 7: Verification**
18. Run `npm run dev` and verify:
    - Dark theme renders correctly
    - Sidebar navigation works
    - API calls are proxied to gateway
    - Pages load without errors

---

## Verification Checklist

After implementation, verify:

- [ ] `npm run dev` starts Vite dev server on port 3000
- [ ] Dark theme applied (dark background, light text)
- [ ] Sidebar navigation works between all pages
- [ ] API proxy works (`/v1/*` routes to gateway)
- [ ] React Query hooks fetch data (visible in React Query DevTools)
- [ ] TypeScript compilation passes (`npm run build`)
- [ ] No console errors on any page
- [ ] BatchJobs page shows job count from API
- [ ] RealtimeSessions page shows worker count from API

---

## Commands Summary

```bash
# Development
cd web
npm install
npm run dev

# Build
npm run build

# Type check
npx tsc --noEmit

# Lint
npm run lint
```

---

## Notes

1. **shadcn/ui components** will be added incrementally as needed (Button, Card, Table, etc.) using `npx shadcn-ui@latest add <component>`.

2. **Console API endpoints** (`/api/console/*`) don't exist yet. The hooks are written to handle 404 errors gracefully. These endpoints will be implemented in task 10.6.

3. **Existing endpoints** are reused where possible:
   - `GET /v1/audio/transcriptions` for job list
   - `GET /v1/audio/transcriptions/:id` for job detail
   - `GET /v1/realtime/status` for realtime capacity

4. **Page placeholders** are minimal but functional. They demonstrate the data fetching pattern and will be fleshed out in subsequent tasks (10.3, 10.4, 10.5).

5. **Dark theme** is the only theme. No light/dark toggle needed per requirements.
